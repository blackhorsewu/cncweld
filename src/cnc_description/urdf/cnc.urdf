<?xml version="1.0" encoding="utf-8"?>
<!--
This is the URDF model for the Self Built CNC Welding Mechanism for CNERC, HK PolyU.
15 July 2021, by Victor W H Wu.
Updated on 18 July 2021 to have all X, Y, and Z axes.
The Turn table is still needed to be put on and replace the tool0.
Updated on 19 July 2021, tool0 has been replaced with the Turn Table, Welding Torch, and Laser Scanner.
-->
<robot name="cncweld" xmlns:xacro="http://ros.org/wiki/xacro">

  <link name="world" />

<!--
  There are 2 rails for the base link. 
-->
  <link
    name="base_link">
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cnc_description/meshes/base_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cnc_description/meshes/base_link.STL" />
      </geometry>
    </collision>
  </link>
<!--
  The World to base link Fixed Joint
-->
  <joint name="world_to_base_link" type="fixed">
    <parent link="world" />
    <child link="base_link" />
    <origin xyz="0.044 0.0 0.02" rpy="0.0 0.0 0.0" />
  </joint>

<!--
  The X link
-->
  <link
    name="X_link">
    <visual>
      <origin
        xyz="0.0 0.0 0.0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cnc_description/meshes/X_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0.0 0.0 0.0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cnc_description/meshes/X_link.STL" />
      </geometry>
    </collision>
  </link>

<!--
  The base link to X link Prismatic Joint
-->
  <joint
    name="base_link_X_link_joint"
    type="prismatic">
    <origin
      xyz="0.0 0.0 0.083" rpy="0.0 0.0 0.0" />
    <parent
      link="base_link" />
    <child
      link="X_link" />
    <axis  xyz="1 0 0"/>
    <limit effort="1000.0" lower="0.09" upper="0.75" velocity="0.05"/>
  </joint>

<!--
  The Y link
-->
  <link
    name="Y_link">
    <visual>
      <origin
        xyz="0.0 0.0 0.0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cnc_description/meshes/Y_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0.0 0.0 0.0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cnc_description/meshes/Y_link.STL" />
      </geometry>
    </collision>
  </link>

<!--
  The X link to Y link Prismatic Joint
-->
  <joint
    name="X_link_Y_link_joint"
    type="prismatic">
    <origin
      xyz="0.08 -0.058 -0.041" rpy="0.0 0.0 0.0" />
    <parent
      link="X_link" />
    <child
      link="Y_link" />
    <limit effort="1000.0" lower="0.0" upper="0.18" velocity="0.05"/>
    <axis  xyz="0 1 0"/>
  </joint>

<!--
  The Z link.
-->
  <link
    name="Z_link">
    <visual>
      <origin
        xyz="0.0 0.0 0.0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cnc_description/meshes/Z_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0.0 0.0 0.0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cnc_description/meshes/Z_link.STL" />
      </geometry>
    </collision>
  </link>

<!--
  The Y link to Z_link Prismatic Joint
-->
  <joint
    name="Y_link_Z_link_joint"
    type="prismatic">
<!--
    <origin xyz="0.045 0.0 0.0" rpy="0.0 0.0 0.0" />
-->
    <origin xyz="0.068 0.0 0.23" rpy="0.0 0.0 0.0" />
    <parent
      link="Y_link" />
    <child
      link="Z_link" />
    <limit effort="1000.0" lower="-0.086" upper="0.0" velocity="0.05"/>
    <axis  xyz="0 0 1"/>
  </joint>

<!--
  The torch.
-->
  <link
    name="torch">
    <visual>
      <origin
        xyz="0.0 0.0 0.0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cnc_description/meshes/torch.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0.0 0.0 0.0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://cnc_description/meshes/torch.STL" />
      </geometry>
    </collision>
  </link>

<!--
  The Z_link to Torch Revolute Joint
-->
  <joint
    name="Z_link_torch_joint"
    type="revolute">
    <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
    <parent
      link="Z_link" />
    <child
      link="torch" />
    <limit effort="1000.0" lower="-3.1416" upper="3.1416" velocity="0.05"/>
  </joint>

  <link name="torch_tip"/>
  <joint
    name="torch_to_tip"
    type="fixed">
    <origin xyz="0.08 0.0 -0.19" rpy="0.0 0.0 0.0" />
    <parent
      link="torch" />
    <child
      link="torch_tip" />
  </joint>

</robot>
